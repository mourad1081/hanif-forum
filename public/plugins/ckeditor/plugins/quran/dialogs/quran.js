CKEDITOR.dialog.add("quranDialog",function(g){return{title:"Quran",minWidth:400,minHeight:200,contents:[{id:"tab-basic",label:"Basic Settings",elements:[{type:"text",id:"quran",label:"Veuillez entrer la référence coranique dans le format <strong>num. sourate:debut-fin</strong>. <br><em>Exemple : 1:1-5 pour les cinq premiers versets de la sourate 1.</em>",validate:CKEDITOR.dialog.validate.notEmpty("Abbreviation field cannot be empty.")}]}],onOk:function(){var d=this.getValueOf("tab-basic","quran"),h=d.split(":")[0],f=d.split(":")[1];$.ajax({url:CKEDITOR.plugins.getPath('quran')+'quran.xml'}).done(function(a){var e,
b="";console.log(f);e=f.split("-")[0];for(var d=f.split("-")[1],b='<span style="text-align:right; direction:rtl;">',c=e;c<=d;c++)e=$(a).find("sura[index='"+h+"']").find("aya[index='"+c+"']").attr("text"),b+='<span class="aya">'+e+"</span> "+('<span class="aya-number number-'+c+'">('+c+")</span>");b+="</span>";a=g.document.createElement("span");a.addClass("ayat");a.setHtml(b);g.insertElement(a)}).fail(function(a){console.log(a)}).always(function(){console.log("complete")})}}});